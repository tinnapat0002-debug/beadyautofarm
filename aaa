--========================================================
--           CHECK REMOTES & AUTO SERVER HOP             
--========================================================

local function checkRemotes()
    local rps = game:GetService("ReplicatedStorage")
    return rps:FindFirstChild("Remotes") ~= nil
end

local function rejoinServer()
    print("üîÑ REJOINING SERVER...")
    pcall(function()
        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, game:GetService("Players").LocalPlayer)
    end)
    task.wait(5)
    pcall(function()
        game:GetService("TeleportService"):Teleport(game.PlaceId, game:GetService("Players").LocalPlayer)
    end)
end

while not checkRemotes() do
    print("‚ö†Ô∏è Remotes ‡πÑ‡∏°‡πà‡∏û‡∏ö - ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà...")
    
    pcall(function()
        local VirtualInputManager = game:GetService("VirtualInputManager")
        local UserInputService = game:GetService("UserInputService")
        local isMobile = UserInputService.TouchEnabled
        
        local btn = game:GetService("Players").LocalPlayer.PlayerGui.ScreenGui.CanvasGroup.Main.BeadyCity.Button
        
        local pos = btn.AbsolutePosition
        local size = btn.AbsoluteSize
        local centerX = pos.X + (size.X / 2)
        local centerY = pos.Y + (size.Y / 2)
        
        if isMobile then
            VirtualInputManager:SendTouchEvent(0, centerX, centerY)
            task.wait(0.1)
            VirtualInputManager:SendTouchEvent(2, centerX, centerY)
        else
            VirtualInputManager:SendMouseButtonEvent(centerX, centerY, 0, true, game, 1)
            task.wait(0.1)
            VirtualInputManager:SendMouseButtonEvent(centerX, centerY, 0, false, game, 1)
        end
    end)
    
    task.wait(2)
    
    pcall(function()
        local Players = game:GetService("Players")
        local VirtualInputManager = game:GetService("VirtualInputManager")
        local UserInputService = game:GetService("UserInputService")
        local LocalPlayer = Players.LocalPlayer
        local isMobile = UserInputService.TouchEnabled

        local scrollingFrame = LocalPlayer.PlayerGui:WaitForChild("ScreenGui").CanvasGroup.ServerList.ScrollingFrame

        local function virtualClick(button)
            if not button then return end

            scrollingFrame.CanvasPosition = Vector2.new(0, button.AbsolutePosition.Y - scrollingFrame.AbsolutePosition.Y)
            task.wait(0.3)

            local pos = button.AbsolutePosition
            local size = button.AbsoluteSize
            local centerX = pos.X + (size.X / 2)
            local centerY = pos.Y + (size.Y / 2) + 58

            if isMobile then
                VirtualInputManager:SendTouchEvent(0, centerX, centerY)
                task.wait(0.1)
                VirtualInputManager:SendTouchEvent(2, centerX, centerY)
            else
                VirtualInputManager:SendMouseButtonEvent(centerX, centerY, 0, true, game, 1)
                task.wait(0.1)
                VirtualInputManager:SendMouseButtonEvent(centerX, centerY, 0, false, game, 1)
            end
        end

        local found = false
        for _, v in pairs(scrollingFrame:GetDescendants()) do
            local success, text = pcall(function() return v.ContentText end)
            
            if success and v.Name == "Count" and text == "50 / 0" then
                local container = v.Parent
                local targetButton = container:FindFirstChildOfClass("TextButton") or container.Parent:FindFirstChildOfClass("TextButton")
                
                if targetButton then
                    virtualClick(targetButton)
                    found = true
                    break
                end
            end
        end

        if not found then
            rejoinServer()
        end
    end)
    
    task.wait(10)
end

print("‚úÖ ‡∏û‡∏ö Remotes ‡πÅ‡∏•‡πâ‡∏ß - ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠!")

--========================================================
--              FLUENT UI AUTO FARM SYSTEM               
--========================================================

-- Load Fluent UI
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á Window
local Window = Fluent:CreateWindow({
    Title = "Auto Farm System",
    SubTitle = "Full Auto Script",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á Tabs
local Tabs = {
    Main = Window:AddTab({ Title = "üè† Main", Icon = "home" }),
    Info = Window:AddTab({ Title = "‚ÑπÔ∏è Info", Icon = "info" })
}

-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- Global Variables
local AutoFishingEnabled = _G.CONFIG.AutoFishingOnStart
local AutoGrapeEnabled = _G.CONFIG.AutoGrapeOnStart

local isFishing = false
local isSelling = false
local isTeleporting = false
local isBuyingBait = false
local isFarming = false
local isProcessing = false
local isBuyingFood = false
local currentActivity = nil

--========================================================
--                  FISHING FUNCTIONS                     
--========================================================

local function toggleFishingRod()
    pcall(function()
        local args = {"FishingRod", "", ""}
        game.Lighting:WaitForChild("Sky"):WaitForChild("Optimized"):FireServer(unpack(args))
    end)
end

local function getCurrentWeight()
    local success, weightText = pcall(function()
        return player.PlayerGui["Inventory1.5"].Frame.Main.Frame.Frame.TextLabel.Text
    end)
    
    if success and weightText then
        local currentWeight = tonumber(string.match(weightText, "([%d%.]+)/"))
        return currentWeight, weightText
    end
    
    return nil, nil
end

local function getBaitAmount()
    local amount = 0
    pcall(function()
        local baitItem = player.PlayerGui["Inventory1.5"].Frame.Main.ScrollingFrame.Scrolling:FindFirstChild("Bait")
        if baitItem then
            amount = tonumber(baitItem:GetAttribute("value")) or 0
        end
    end)
    return amount
end

local function getFishAmount(fishName)
    local amount = 0
    pcall(function()
        local fishItem = player.PlayerGui["Inventory1.5"].Frame.Main.ScrollingFrame.Scrolling:FindFirstChild(fishName)
        if fishItem then
            amount = tonumber(fishItem:GetAttribute("value")) or 0
        end
    end)
    return amount
end

local function buyBait()
    isBuyingBait = true
    
    local SHOP_POSITION = Vector3.new(284, 66, -956)
    
    for i = 1, 3 do
        pcall(function()
            local character = player.Character or player.CharacterAdded:Wait()
            local hrp = character:WaitForChild("HumanoidRootPart")
            hrp.CFrame = CFrame.new(SHOP_POSITION)
        end)
        task.wait(1)
    end
    
    task.wait(1.5)

    pcall(function()
        local character = player.Character
        local hrp = character and character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local targetPrompt = nil
        local shortestDistance = math.huge

        for _, item in ipairs(workspace.AMain.Market_:GetChildren()) do
            local prompt = item:FindFirstChild("MarketPrompt")
            if prompt and prompt:IsA("ProximityPrompt") then
                pcall(function()
                    local promptPos = item:IsA("BasePart") and item.Position or item.WorldPosition
                    local distance = (hrp.Position - promptPos).Magnitude
                    
                    if distance < shortestDistance then
                        shortestDistance = distance
                        targetPrompt = prompt
                    end
                end)
            end
        end

        if targetPrompt then
            fireproximityprompt(targetPrompt)
        end
    end)
    
    task.wait(2)
    
    pcall(function()
        local args = {
            "Money",
            {
                Bait = {
                    Price = 10,
                    Amount = 10
                }
            }
        }
        player.PlayerGui.Shop.LocalScript.RemoteEvent:FireServer(unpack(args))
    end)
    
    task.wait(2)
    
    pcall(function()
        local args = { "Close" }
        player.PlayerGui.Shop.LocalScript.RemoteEvent:FireServer(unpack(args))
    end)
    
    isBuyingBait = false
end

local function teleportToFishingSpot()
    while isTeleporting or isSelling or isBuyingBait or isBuyingFood do
        task.wait(1)
    end
    
    isTeleporting = true
    
    local FISHING_POSITION = Vector3.new(-671, 32, -2950)
    
    for i = 1, 5 do
        pcall(function()
            local character = player.Character or player.CharacterAdded:Wait()
            local hrp = character:WaitForChild("HumanoidRootPart")
            hrp.CFrame = CFrame.new(FISHING_POSITION)
        end)
        task.wait(3)
    end
    
    isTeleporting = false
end

local function startFishing()
    toggleFishingRod()
    task.wait(1)
    
    teleportToFishingSpot()
    
    for i = 1, 3 do
        pcall(function()
            ReplicatedStorage.Remote.Main:FireServer("AutoFishing")
        end)
    end
    
    isFishing = true
end

local function resumeFishing()
    toggleFishingRod()
    task.wait(1)
    
    teleportToFishingSpot()
    
    for i = 1, 3 do
        pcall(function()
            ReplicatedStorage.Remote.Main:FireServer("AutoFishing")
        end)
    end
    
    isFishing = true
end

local function sellSalmon()
    local sellCount = 0
    
    while true do
        local amount = getFishAmount("Salmon")
        
        if amount <= 0 then
            break
        end
        
        sellCount = sellCount + 1
        
        pcall(function()
            local args = {"Seller", "Salmon", amount}
            player.PlayerGui.ECONOMY.ClientHandler.RemoteEvent:FireServer(unpack(args))
        end)
        
        task.wait(2)
        
        if sellCount >= 20 then
            break
        end
    end
end

local function sellAllFish()
    while isTeleporting or isBuyingBait or isBuyingFood do
        task.wait(1)
    end
    
    isSelling = true
    
    local normalFish = {"Octopus", "Seaweed", "Shrimp"}
    
    for i = 1, 3 do
        pcall(function()
            local character = player.Character or player.CharacterAdded:Wait()
            local hrp = character:WaitForChild("HumanoidRootPart")
            local sellPoint = workspace.AMain[" "].HumanoidRootPart
            hrp.CFrame = sellPoint.CFrame
        end)
        task.wait(2)
    end
    
    task.wait(3)
    
    for i = 1, 3 do
        pcall(function()
            local prompt = workspace.AMain[" "].HumanoidRootPart.Attachment.PromptEconomy
            if prompt and prompt:IsA("ProximityPrompt") then
                fireproximityprompt(prompt)
            end
        end)
        task.wait(1)
    end
    
    task.wait(2)
    
    for _, fishName in ipairs(normalFish) do
        local sellCount = 0
        
        while true do
            local amount = getFishAmount(fishName)
            
            if amount <= 0 then
                break
            end
            
            sellCount = sellCount + 1
            
            pcall(function()
                local args = {"Seller", fishName, amount}
                player.PlayerGui.ECONOMY.ClientHandler.RemoteEvent:FireServer(unpack(args))
            end)
            
            task.wait(2)
            
            if sellCount >= 20 then
                break
            end
        end
        
        task.wait(1)
    end
    
    task.wait(2)
    sellSalmon()
    task.wait(2)
    
    pcall(function()
        local args = {"Close"}
        player.PlayerGui.ECONOMY.ClientHandler.RemoteEvent:FireServer(unpack(args))
    end)
    
    task.wait(1)
    isSelling = false
end

--========================================================
--                  GRAPE FUNCTIONS                       
--========================================================

local function getGrapeAmount()
    local amount = 0
    pcall(function()
        local scrollingFrame = player.PlayerGui["Inventory1.5"].Frame.Main.ScrollingFrame.Scrolling
        local grapeItem = scrollingFrame:FindFirstChild("Grape")
        if grapeItem then
            amount = tonumber(grapeItem:GetAttribute("value")) or 0
        end
    end)
    return amount
end

local function getGrapePackAmount()
    local amount = 0
    pcall(function()
        local scrollingFrame = player.PlayerGui["Inventory1.5"].Frame.Main.ScrollingFrame.Scrolling
        local grapePackItem = scrollingFrame:FindFirstChild("GrapePack")
        if grapePackItem then
            amount = tonumber(grapePackItem:GetAttribute("value")) or 0
        end
    end)
    return amount
end

local function getAnyGrape()
    local farmPath = workspace:FindFirstChild("ModelTown") and 
                     workspace.ModelTown:FindFirstChild("Farm") and 
                     workspace.ModelTown.Farm:FindFirstChild("W") and 
                     workspace.ModelTown.Farm.W:FindFirstChild("grape")
    
    if not farmPath then return nil end
    
    for _, v in ipairs(farmPath:GetChildren()) do
        if v:IsA("BasePart") or v:IsA("Model") then
            return v
        end
    end
    return nil
end

local function sellGrapePack()
    while isTeleporting or isProcessing or isBuyingFood do
        task.wait(1)
    end
    
    isSelling = true
    
    for i = 1, 3 do
        pcall(function()
            local character = player.Character or player.CharacterAdded:Wait()
            local hrp = character:WaitForChild("HumanoidRootPart")
            local sellPoint = workspace.AMain[" "].HumanoidRootPart
            hrp.CFrame = sellPoint.CFrame
        end)
        task.wait(2)
    end
    
    task.wait(3)
    
    for i = 1, 3 do
        pcall(function()
            local prompt = workspace.AMain[" "].HumanoidRootPart.Attachment.PromptEconomy
            if prompt and prompt:IsA("ProximityPrompt") then
                fireproximityprompt(prompt)
            end
        end)
        task.wait(1)
    end
    
    task.wait(2)
    
    local sellCount = 0
    
    while true do
        local amount = getGrapePackAmount()
        
        if amount <= 0 then
            break
        end
        
        sellCount = sellCount + 1
        
        pcall(function()
            local args = {"Seller", "GrapePack", amount}
            player.PlayerGui.ECONOMY.ClientHandler.RemoteEvent:FireServer(unpack(args))
        end)
        
        task.wait(2)
        
        if sellCount >= 20 then
            break
        end
    end
    
    task.wait(2)
    
    pcall(function()
        local args = {"Close"}
        player.PlayerGui.ECONOMY.ClientHandler.RemoteEvent:FireServer(unpack(args))
    end)
    
    task.wait(1)
    isSelling = false
end

local function processGrapes()
    isProcessing = true
    
    pcall(function()
        ReplicatedStorage.Remotes.Farm:FireServer("Stop")
    end)
    
    task.wait(1)
    
    local PROCESS_POS = Vector3.new(5334, 477, 2737)
    
    for i = 1, 3 do
        pcall(function()
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character.HumanoidRootPart.CFrame = CFrame.new(PROCESS_POS)
            end
        end)
        task.wait(2)
    end
    
    task.wait(2)
    
    for i = 1, 3 do
        pcall(function()
            local prompt = workspace.AMain.GrapeProcess.Prompt
            if prompt then
                fireproximityprompt(prompt)
            end
        end)
        task.wait(1)
    end
    
    task.wait(2)
    
    repeat
        task.wait(5)
    until getGrapeAmount() < 1
    
    task.wait(20)
    isProcessing = false
end

local function startGrapeFarm()
    while isTeleporting or isSelling or isProcessing or isBuyingFood do
        task.wait(1)
    end
    
    isTeleporting = true
    isFarming = true
    
    local targetGrape = getAnyGrape()
    
    if not targetGrape then
        task.wait(10)
        isTeleporting = false
        isFarming = false
        return
    end
    
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        local targetPos = targetGrape:IsA("Model") and targetGrape:GetModelCFrame() or targetGrape.CFrame
        hrp.CFrame = targetPos * CFrame.new(0, 2, 0)
        
        task.wait(1)
        
        pcall(function()
            ReplicatedStorage.Remote.Main:FireServer("FarmItemGame")
        end)
        
        isTeleporting = false
        
        repeat
            task.wait(5)
        until getGrapeAmount() >= 30
    end
    
    isFarming = false
end

--========================================================
--                  FOOD SYSTEM                           
--========================================================

local function getHunger()
    local hunger = 100
    pcall(function()
        hunger = player.Status.Hunger.Value
    end)
    return hunger
end

local function getBrain()
    local brain = 100
    pcall(function()
        brain = player.Status.Brain.Value
    end)
    return brain
end

local function buyAndEatFood()
    isBuyingFood = true
    
    local SHOP_POSITION = Vector3.new(284, 66, -956)
    
    for i = 1, 3 do
        pcall(function()
            local character = player.Character or player.CharacterAdded:Wait()
            local hrp = character:WaitForChild("HumanoidRootPart")
            hrp.CFrame = CFrame.new(SHOP_POSITION)
        end)
        task.wait(1)
    end
    
    task.wait(1.5)

    pcall(function()
        local character = player.Character
        local hrp = character and character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end

        local targetPrompt = nil
        local shortestDistance = math.huge

        for _, item in ipairs(workspace.AMain.Market_:GetChildren()) do
            local prompt = item:FindFirstChild("MarketPrompt")
            if prompt and prompt:IsA("ProximityPrompt") then
                pcall(function()
                    local promptPos = item:IsA("BasePart") and item.Position or item.WorldPosition
                    local distance = (hrp.Position - promptPos).Magnitude
                    
                    if distance < shortestDistance then
                        shortestDistance = distance
                        targetPrompt = prompt
                    end
                end)
            end
        end

        if targetPrompt then
            fireproximityprompt(targetPrompt)
        end
    end)
    
    task.wait(2)
    
    pcall(function()
        local args = {
            "Money",
            {
                ["Snack bar"] = {
                    Price = 500,
                    Amount = 1
                }
            }
        }
        player.PlayerGui.Shop.LocalScript.RemoteEvent:FireServer(unpack(args))
    end)
    
    task.wait(1)
    
    pcall(function()
        local args = {
            "Money",
            {
                ["Cotton candy"] = {
                    Price = 500,
                    Amount = 1
                }
            }
        }
        player.PlayerGui.Shop.LocalScript.RemoteEvent:FireServer(unpack(args))
    end)
    
    task.wait(1)
    
    pcall(function()
        local args = {"Close"}
        player.PlayerGui.Shop.LocalScript.RemoteEvent:FireServer(unpack(args))
    end)
    
    task.wait(2)
    
    pcall(function()
        local args = {"Hunger", 0, "Cotton candy"}
        game.Lighting:WaitForChild("Sky"):WaitForChild("Optimized"):FireServer(unpack(args))
    end)
    
    task.wait(20)
    
    pcall(function()
        local args = {"Hunger", 10, "Snack bar"}
        game.Lighting:WaitForChild("Sky"):WaitForChild("Optimized"):FireServer(unpack(args))
    end)
    
    task.wait(20)
    
    isBuyingFood = false
end

--========================================================
--                  BACKGROUND THREADS                    
--========================================================

-- Check for players and fire lobby remote
task.spawn(function()
    while true do
        task.wait(2)
        
        local playerCount = 0
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= player then
                playerCount = playerCount + 1
            end
        end
        
        if playerCount > 0 then
            pcall(function()
                ReplicatedStorage.Lobby:FireServer()
            end)
        end
    end
end)

-- Check hunger and brain
task.spawn(function()
    while true do
        task.wait(30)
        
        if isBuyingFood or isSelling or isTeleporting then
            continue
        end
        
        local hunger = getHunger()
        local brain = getBrain()
        
        if hunger <= 50 or brain <= 50 then
            local wasFishing = isFishing
            local savedActivity = currentActivity

            if isFishing then
                toggleFishingRod()
                task.wait(1)
            end
            
            buyAndEatFood()

            if savedActivity == "fishing" and AutoFishingEnabled then
                resumeFishing()
            elseif savedActivity == "grape" and AutoGrapeEnabled then

                print("‚úÖ ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ü‡∏≤‡∏°‡∏≠‡∏á‡∏∏‡πà‡∏ô‡∏ï‡πà‡∏≠")
            end
        end
    end
end)

-- Check bait (for fishing)
task.spawn(function()
    while true do
        task.wait(10)
        
        if not AutoFishingEnabled or isBuyingBait or isSelling or isTeleporting or isBuyingFood then
            continue
        end
        
        local baitAmount = getBaitAmount()
        
        if baitAmount < 20 then
            if isFishing then
                toggleFishingRod()
                isFishing = false
                task.wait(1)
            end
            
            buyBait()
            
            if AutoFishingEnabled then
                task.wait(2)
                resumeFishing()
            end
        end
    end
end)

--========================================================
--                  MAIN TAB                              
--========================================================

-- Auto Fishing Toggle
local FishingToggle = Tabs.Main:AddToggle("AutoFishing", {
    Title = "Auto Fishing",
    Description = "‡∏ï‡∏Å‡∏õ‡∏•‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ - ‡∏ü‡∏≤‡∏°-‡∏Ç‡∏≤‡∏¢-‡∏ß‡∏ô‡∏ã‡πâ‡∏≥",
    Default = _G.CONFIG.AutoFishingOnStart,
    Callback = function(Value)
        AutoFishingEnabled = Value
        
        if Value then
            currentActivity = "fishing"  -- ‚¨ÖÔ∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°
            
            Fluent:Notify({
                Title = "Auto Fishing",
                Content = "‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏Å‡∏õ‡∏•‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
                Duration = 3
            })
            
            task.spawn(function()
                while AutoFishingEnabled do
                    startFishing()
                    
                    while AutoFishingEnabled do
                        task.wait(2)
                        
                        if isSelling or isTeleporting or isBuyingBait or isBuyingFood then
                            continue
                        end
                        
                        local currentWeight = getCurrentWeight()
                        
                        if currentWeight and currentWeight >= 50 then
                            toggleFishingRod()
                            isFishing = false
                            task.wait(2)
                            sellAllFish()
                            task.wait(3)
                            break
                        end
                    end
                end
                currentActivity = nil
            end)
        else
            currentActivity = nil
            Fluent:Notify({
                Title = "Auto Fishing",
                Content = "‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏Å‡∏õ‡∏•‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
                Duration = 3
            })
            if isFishing then
                toggleFishingRod()
                isFishing = false
            end
        end
    end
})


local GrapeToggle = Tabs.Main:AddToggle("AutoGrape", {
    Title = "üçá Auto Grape Farm",
    Description = "‡∏ü‡∏≤‡∏°‡∏≠‡∏á‡∏∏‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ - ‡∏ü‡∏≤‡∏°-‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ-‡∏Ç‡∏≤‡∏¢-‡∏ß‡∏ô‡∏ã‡πâ‡∏≥",
    Default = _G.CONFIG.AutoGrapeOnStart,
    Callback = function(Value)
        AutoGrapeEnabled = Value
        
        if Value then
            currentActivity = "grape"  -- ‚¨ÖÔ∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°
            
            Fluent:Notify({
                Title = "Auto Grape",
                Content = "‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏°‡∏≠‡∏á‡∏∏‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
                Duration = 3
            })
            
            task.spawn(function()
                while AutoGrapeEnabled do
                    while AutoGrapeEnabled do
                        if isSelling or isTeleporting or isBuyingFood then
                            task.wait(1)
                            continue
                        end
                        
                        local currentWeight = getCurrentWeight()
                        
                        if currentWeight and currentWeight >= 60 then
                            print("‚ö†Ô∏è ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡πá‡∏°: " .. currentWeight .. " KG")
                            break
                        end
                        
                        startGrapeFarm()
                        processGrapes()
                        task.wait(2)
                    end
                    
                    if AutoGrapeEnabled then
                        print("üí∞ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏õ‡∏Ç‡∏≤‡∏¢ GrapePack...")
                        sellGrapePack()
                        task.wait(3)
                    end
                end
                currentActivity = nil
            end)
        else
            currentActivity = nil 
            Fluent:Notify({
                Title = "Auto Grape",
                Content = "‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏°‡∏≠‡∏á‡∏∏‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
                Duration = 3
            })
        end
    end
})


--========================================================
--                  FINAL SETUP                           
--========================================================

if _G.CONFIG.AutoFishingOnStart then
    task.wait(2)
    print("üé£ [CONFIG] ‡πÄ‡∏õ‡∏¥‡∏î Auto Fishing ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥")
    FishingToggle:SetValue(true)
end

if _G.CONFIG.AutoGrapeOnStart then
    task.wait(2)
    print("üçá [CONFIG] ‡πÄ‡∏õ‡∏¥‡∏î Auto Grape ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥")
    GrapeToggle:SetValue(true)
end

-- Notification
local configMsg = ""
if _G.CONFIG.AutoFishingOnStart then
    configMsg = configMsg .. "üé£ Auto Fishing "
end
if _G.CONFIG.AutoGrapeOnStart then
    configMsg = configMsg .. "üçá Auto Grape "
end

if configMsg ~= "" then
    Fluent:Notify({
        Title = "‚úÖ Auto Start Enabled",
        Content = "‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥: " .. configMsg,
        Duration = 5
    })
end

Fluent:Notify({
    Title = "‚úÖ Auto Farm System Loaded!",
    Content = "‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",
    Duration = 5
})

print("‚úÖ Full Auto Farm System Loaded!")
print("üìã Config: Fishing=" .. tostring(_G.CONFIG.AutoFishingOnStart) .. " | Grape=" .. tostring(_G.CONFIG.AutoGrapeOnStart))
